{% extends 'monthly_report/base.html' %}

{% block title %}Analytic Dashboard{% endblock %}

{% block body_block %}
  <!-- Breadcrumb -->
  <ol class="breadcrumb">
    Following analysis based on sample data
  </ol>

  <div class="">
    <div class="row">
      <div class="col-12">
        <div>
          <select class="form-select year_select" aria-label="">
            <option value="select another year">select another year</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
          </select>
        </div>
        <div class="table-wrapper">
          <table class="table table-striped table-hover caption-top">
            <caption class="current_year"></caption>
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">January</th>
                <th scope="col">February</th>
                <th scope="col">March</th>
                <th scope="col">April</th>
                <th scope="col">May</th>
                <th scope="col">June</th>
                <th scope="col">July</th>
                <th scope="col">August</th>
                <th scope="col">September</th>
                <th scope="col">October</th>
                <th scope="col">November</th>
                <th scope="col">December</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">মোট অফিস</th>
                <td class="total_office_1"></td>
                <td class="total_office_2"></td>
                <td class="total_office_3"></td>
                <td class="total_office_4"></td>
                <td class="total_office_5"></td>
                <td class="total_office_6"></td>
                <td class="total_office_7"></td>
                <td class="total_office_8"></td>
                <td class="total_office_9"></td>
                <td class="total_office_10"></td>
                <td class="total_office_11"></td>
                <td class="total_office_12"></td>
              </tr>
              <tr>
                <th scope="row">নিষ্পত্তিকৃত নথি</th>
                <td class="nispotti_krito_nothi_1"></td>
                <td class="nispotti_krito_nothi_2"></td>
                <td class="nispotti_krito_nothi_3"></td>
                <td class="nispotti_krito_nothi_4"></td>
                <td class="nispotti_krito_nothi_5"></td>
                <td class="nispotti_krito_nothi_6"></td>
                <td class="nispotti_krito_nothi_7"></td>
                <td class="nispotti_krito_nothi_8"></td>
                <td class="nispotti_krito_nothi_9"></td>
                <td class="nispotti_krito_nothi_10"></td>
                <td class="nispotti_krito_nothi_11"></td>
                <td class="nispotti_krito_nothi_12"></td>
              </tr>
              <tr>
                <th scope="row">মোট উপকারভোগী</th>
                <td class="total_upokarvogi_1"></td>
                <td class="total_upokarvogi_2"></td>
                <td class="total_upokarvogi_3"></td>
                <td class="total_upokarvogi_4"></td>
                <td class="total_upokarvogi_5"></td>
                <td class="total_upokarvogi_6"></td>
                <td class="total_upokarvogi_7"></td>
                <td class="total_upokarvogi_8"></td>
                <td class="total_upokarvogi_9"></td>
                <td class="total_upokarvogi_10"></td>
                <td class="total_upokarvogi_11"></td>
                <td class="total_upokarvogi_12"></td>
              </tr>
              <tr>
                <th scope="row">মোট নথি ব্যবহারকারী(পুরুষ)</th>
                <td class="total_nothi_users_male_1"></td>
                <td class="total_nothi_users_male_2"></td>
                <td class="total_nothi_users_male_3"></td>
                <td class="total_nothi_users_male_4"></td>
                <td class="total_nothi_users_male_5"></td>
                <td class="total_nothi_users_male_6"></td>
                <td class="total_nothi_users_male_7"></td>
                <td class="total_nothi_users_male_8"></td>
                <td class="total_nothi_users_male_9"></td>
                <td class="total_nothi_users_male_10"></td>
                <td class="total_nothi_users_male_11"></td>
                <td class="total_nothi_users_male_12"></td>
              </tr>
              <tr>
                <th scope="row">মোট নথি ব্যবহারকারী(মহিলা)</th>
                <td class="total_nothi_users_female_1"></td>
                <td class="total_nothi_users_female_2"></td>
                <td class="total_nothi_users_female_3"></td>
                <td class="total_nothi_users_female_4"></td>
                <td class="total_nothi_users_female_5"></td>
                <td class="total_nothi_users_female_6"></td>
                <td class="total_nothi_users_female_7"></td>
                <td class="total_nothi_users_female_8"></td>
                <td class="total_nothi_users_female_9"></td>
                <td class="total_nothi_users_female_10"></td>
                <td class="total_nothi_users_female_11"></td>
                <td class="total_nothi_users_female_12"></td>
              </tr>
              <tr>
                <th scope="row">মোবাইল অ্যাপ ব্যবহারকারী</th>
                <td class="total_mobile_app_users_1"></td>
                <td class="total_mobile_app_users_2"></td>
                <td class="total_mobile_app_users_3"></td>
                <td class="total_mobile_app_users_4"></td>
                <td class="total_mobile_app_users_5"></td>
                <td class="total_mobile_app_users_6"></td>
                <td class="total_mobile_app_users_7"></td>
                <td class="total_mobile_app_users_8"></td>
                <td class="total_mobile_app_users_9"></td>
                <td class="total_mobile_app_users_10"></td>
                <td class="total_mobile_app_users_11"></td>
                <td class="total_mobile_app_users_12"></td>
              </tr>
              <tr>
                <th scope="row">মোট নিষ্পন্ন</th>
                <td class="total_nisponno_1"></td>
                <td class="total_nisponno_2"></td>
                <td class="total_nisponno_3"></td>
                <td class="total_nisponno_4"></td>
                <td class="total_nisponno_5"></td>
                <td class="total_nisponno_6"></td>
                <td class="total_nisponno_7"></td>
                <td class="total_nisponno_8"></td>
                <td class="total_nisponno_9"></td>
                <td class="total_nisponno_10"></td>
                <td class="total_nisponno_11"></td>
                <td class="total_nisponno_12"></td>
              </tr>
              <tr>
                <th scope="row">পত্রজারি</th>
                <td class="total_potrojari_1"></td>
                <td class="total_potrojari_2"></td>
                <td class="total_potrojari_3"></td>
                <td class="total_potrojari_4"></td>
                <td class="total_potrojari_5"></td>
                <td class="total_potrojari_6"></td>
                <td class="total_potrojari_7"></td>
                <td class="total_potrojari_8"></td>
                <td class="total_potrojari_9"></td>
                <td class="total_potrojari_10"></td>
                <td class="total_potrojari_11"></td>
                <td class="total_potrojari_12"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    {# <div class="row"> #}
    {#   <div class="col-sm-6 col-md-6"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom"> #}
    {#         Visit Summary #}
    {#       </div> #}
    {#       <!--{"min": 0.05, "max": 59.983333333333334, "avg": 9.316894636825742, "median": 5.95} --> #}
    {#       <div class="card-body"> #}
    {#         <ul class="icons-list"> #}
    {#           <li> #}
    {#             <i class="icon-chart bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Patients</div> #}
    {#               <small>Total visited patients</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{patients.total_visit|floatformat:"0"}}</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-chart bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Busy Month</div> #}
    {#               <small>Most Busiest Month</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{patients.max_visit_month}}</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-chart bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Doctor Ratio</div> #}
    {#               <small>Average Patients per Doctor</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{patients.patient_doctor_ratio|floatformat:"2"}}</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-chart bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Busy Doctor</div> #}
    {#               <small>Most Busiest Doctor</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{patients.busiest_doctor}}</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#         </ul> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {#   <div class="col-sm-6 col-md-6"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom"> #}
    {#         Waiting Summary #}
    {#       </div> #}
    {#       <!--{"min": 0.05, "max": 59.983333333333334, "avg": 9.316894636825742, "median": 5.95} --> #}
    {#       <div class="card-body"> #}
    {#         <ul class="icons-list"> #}
    {#           <li> #}
    {#             <i class="icon-hourglass bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Minimum</div> #}
    {#               <small>Minimum Waiting Time</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{waiting_time_json.min|floatformat:"2"}} min</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-hourglass bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Average</div> #}
    {#               <small>Average Waiting Time</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{waiting_time_json.avg|floatformat:"2"}} min</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-hourglass bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Maximum</div> #}
    {#               <small>Maximum Waiting Time</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{waiting_time_json.max|floatformat:"2"}} min</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#           <li> #}
    {#             <i class="icon-hourglass bg-primary"></i> #}
    {#             <div class="desc"> #}
    {#               <div class="title">Median</div> #}
    {#               <small>Median of total waiting time</small> #}
    {#             </div> #}
    {#             <div class="value"> #}
    {#               <strong>{{waiting_time_json.median}} min</strong> #}
    {#             </div> #}
    {#           </li> #}
    {#         </ul> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {# </div> #}
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <div class="card">
          <div class="card-header card-header-custom2">
            officers per year
          </div>
          <div class="card-body">
            <div id="chart_top_illness">

              <canvas id="bar-chart" width="800" height="450"></canvas>
              <script
                src="https://code.highcharts.com/highcharts.src.js">
              </script>
              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

              <script>
                // Bar chart
                var office_years = {{ office_years|safe }};
                var office_numbers = {{ office_numbers|safe }};
                console.log('years ', office_years)
                console.log('office_numbers ', office_numbers)
                new Chart(document.getElementById("bar-chart"), {
                  type: 'bar',
                  data: {
                    labels: office_years,
                    datasets: [
                      {
                        label: "offices (thousands)",
                        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
                        data: office_numbers
                      }
                    ]
                  },
                  options: {
                    legend: { display: false },
                    title: {
                      display: true,
                      text: 'offices per years'
                    }
                  }
                });
              </script>
            </div>
          </div>
        </div>
      </div>
      <!-- /.modal-dialog -->
    </div>
    {# <div class="row"> #}
    {#   <div class="col-sm-12 col-md-12"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom2"> #}
    {#         Most Common Diseases #}
    {#       </div> #}
    {#       <div class="card-body"> #}
    {#         <div id="chart_top_illness"> #}
    {#           <script #}
    {#             src="https://code.highcharts.com/highcharts.src.js"> #}
    {#           </script> #}

    {#           <script> #}
    {#             Highcharts.chart('chart_top_illness', { #}
    {#               chart: { #}
    {#                 type: 'line' #}
    {#               }, #}
    {#               title: { #}
    {#                 text: '' #}
    {#               }, #}
    {#               subtitle: { #}
    {#                 text: 'Disease wise Monthly Patient Count (Data from Year {{ year_s }} to {{ year_e }} ) ' #}
    {#               }, #}
    {#               xAxis: { #}
    {#                 categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'] #}
    {#               }, #}
    {#               yAxis: { #}
    {#                 title: { #}
    {#                   text: 'Number of Patients' #}
    {#                 } #}
    {#               }, #}
    {#               plotOptions: { #}
    {#                 series: { #}
    {#                   marker: { #}
    {#                     symbol: 'circle' #}
    {#                   } #}
    {#                 }, #}
    {#                 areaspline: { #}
    {#                   fillOpacity: 0.8 #}
    {#                 } #}
    {#               }, #}
    {#               series: {{ series_obj|safe }} #}
    {#             }); #}
    {#           </script> #}
    {#         </div> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {#   <!-- /.modal-dialog --> #}
    {# </div> #}

    {# <div class="row"> #}
    {#   <div class="col-sm-12 col-md-12"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom2"> #}
    {#         Monthly Average Waiting Time #}
    {#       </div> #}
    {#       <div class="card-body"> #}
    {#         <div id="chart_waiting_time_by_clinic"> #}
    {#           <script> #}
    {#             var data = {{ waiting_time_by_clinic|safe }}; #}
    {#             Highcharts.chart('chart_waiting_time_by_clinic', { #}
    {#               chart: { #}
    {#                 type: 'bar' #}
    {#               }, #}
    {#               title: { #}
    {#                 text: '' #}
    {#               }, #}
    {#               xAxis: { #}
    {#                 categories: data.clinics #}
    {#               }, #}
    {#               yAxis: { #}
    {#                 min: 0, #}
    {#                 title: { #}
    {#                   text: '' #}
    {#                 } #}
    {#               }, #}
    {#               legend: { #}
    {#                 reversed: true #}
    {#               }, #}
    {#               plotOptions: { #}
    {#                 series: { #}
    {#                   stacking: 'normal' #}
    {#                 } #}
    {#               }, #}
    {#               series: data.data #}
    {#             }); #}
    {#           </script> #}
    {#         </div> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {#   <!-- /.modal-dialog --> #}
    {# </div> #}

    {# <div class="row"> #}
    {#   <div class="col-sm-5 col-md-5"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom2"> #}
    {#         Department Summary #}
    {#       </div> #}
    {#       <div class="card-body"> #}
    {#         <div id="chart_department_visit"> #}
    {#           <script> #}
    {#             var dept_data = {{ department_visits|safe }}; #}
    {#             Highcharts.chart('chart_department_visit', { #}
    {#               chart: { #}
    {#                 plotBackgroundColor: null, #}
    {#                 plotBorderWidth: null, #}
    {#                 plotShadow: false, #}
    {#                 type: 'pie' #}
    {#               }, #}
    {#               title: { #}
    {#                 text: '' #}
    {#               }, #}
    {#               tooltip: { #}
    {#                 //pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' #}
    {#               }, #}
    {#               plotOptions: { #}
    {#                 pie: { #}
    {#                   allowPointSelect: true, #}
    {#                   cursor: 'pointer', #}
    {#                   dataLabels: { #}
    {#                     enabled: true, #}
    {#                     format: '<b>{point.name}</b>: {point.percentage:.1f} %', #}
    {#                     style: { #}
    {#                       color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black' #}
    {#                     } #}
    {#                   } #}
    {#                 } #}
    {#               }, #}
    {#               series: [{ #}
    {#                 name: 'Medical Examination Department', #}
    {#                 colorByPoint: true, #}
    {#                 data: dept_data #}
    {#               }] #}
    {#             }); #}
    {#           </script> #}
    {#         </div> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {#   <!-- /.modal-dialog --> #}
    {#   <!--</div>--> #}

    {#   <!--<div class="row">--> #}
    {#   <div class="col-sm-7 col-md-7"> #}
    {#     <div class="card"> #}
    {#       <div class="card-header card-header-custom2"> #}
    {#         Monthly Department Visit #}
    {#       </div> #}
    {#       <div class="card-body"> #}
    {#         <div id="chart_monthly_departments_visit"> #}
    {#           <script> #}
    {#             var data = {{ department_visits_monthly|safe }}; #}
    {#             Highcharts.chart('chart_monthly_departments_visit', { #}
    {#               chart: { #}
    {#                 type: 'column' #}
    {#               }, #}
    {#               title: { #}
    {#                 text: '' #}
    {#               }, #}
    {#               subtitle: { #}
    {#                 text: '' #}
    {#               }, #}
    {#               xAxis: { #}
    {#                 categories: data.months, #}
    {#                 crosshair: true #}
    {#               }, #}
    {#               yAxis: { #}
    {#                 min: 0, #}
    {#                 title: { #}
    {#                   text: 'Patient visit' #}
    {#                 } #}
    {#               }, #}
    {#               tooltip: { #}
    {#                 headerFormat: '<span style="font-size:10px">{point.key}</span><table>', #}
    {#                 pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + #}
    {#                 '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>', #}
    {#                 footerFormat: '</table>', #}
    {#                 shared: true, #}
    {#                 useHTML: true #}
    {#               }, #}
    {#               plotOptions: { #}
    {#                 column: { #}
    {#                   pointPadding: 0.2, #}
    {#                   borderWidth: 0 #}
    {#                 } #}
    {#               }, #}
    {#               series: data.data #}
    {#             }); #}
    {#           </script> #}
    {#         </div> #}
    {#       </div> #}
    {#     </div> #}
    {#   </div> #}
    {#   <!-- /.modal-dialog --> #}
    {#   </div> #}

      {# <div class="row"> #}
      {#   <div class="col-sm-6 col-md-6"> #}
      {#     <div class="card"> #}
      {#       <div class="card-header card-header-custom2"> #}
      {#         Monthly Patients Visit by Clinic #}
      {#       </div> #}
      {#       <div class="card-body"> #}
      {#         <div id="chart_monthly_patient_visit_count"> #}
      {#           <script> #}
      {#             var data = {{ monthly_patient_visit_count|safe }}; #}
      {#             Highcharts.chart('chart_monthly_patient_visit_count', { #}
      {#               chart: { #}
      {#                 type: 'column' #}
      {#               }, #}
      {#               title: { #}
      {#                 text: '' #}
      {#               }, #}
      {#               subtitle: { #}
      {#                 text: '' #}
      {#               }, #}
      {#               xAxis: { #}
      {#                 categories: data.months, #}
      {#                 crosshair: true #}
      {#               }, #}
      {#               yAxis: { #}
      {#                 min: 0, #}
      {#                 title: { #}
      {#                   text: 'Patients visit' #}
      {#                 } #}
      {#               }, #}
      {#               tooltip: { #}
      {#                 headerFormat: '<span style="font-size:10px">{point.key}</span><table>', #}
      {#                 pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + #}
      {#                 '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>', #}
      {#                 footerFormat: '</table>', #}
      {#                 shared: true, #}
      {#                 useHTML: true #}
      {#               }, #}
      {#               plotOptions: { #}
      {#                 column: { #}
      {#                   pointPadding: 0.2, #}
      {#                   borderWidth: 0 #}
      {#                 } #}
      {#               }, #}
      {#               series: data.data #}
      {#             }); #}

      {#           </script> #}
      {#         </div> #}
      {#       </div> #}
      {#     </div> #}
      {#   </div> #}
      {#   <!-- /.modal-dialog --> #}
      {#   <!--</div>--> #}

      {#   <!--<div class="row">--> #}
      {#   <div class="col-sm-6 col-md-6"> #}
      {#     <div class="card"> #}
      {#       <div class="card-header card-header-custom2"> #}
      {#         Doctor Count by Clinics #}
      {#       </div> #}
      {#       <div class="card-body"> #}
      {#         <div id="chart_staff_count_by_clinic"> #}
      {#           <script> #}
      {#             var data = {{ staff_count_by_clinic|safe }}; #}
      {#             Highcharts.chart('chart_staff_count_by_clinic', { #}
      {#               chart: { #}
      {#                 plotBackgroundColor: null, #}
      {#                 plotBorderWidth: null, #}
      {#                 plotShadow: false, #}
      {#                 type: 'pie' #}
      {#               }, #}
      {#               title: { #}
      {#                 text: '' #}
      {#               }, #}
      {#               tooltip: { #}
      {#                 //pointFormat: '{series.name}: <b>{point.count:.1f}%</b>' #}
      {#               }, #}
      {#               plotOptions: { #}
      {#                 pie: { #}
      {#                   allowPointSelect: true, #}
      {#                   cursor: 'pointer', #}
      {#                   dataLabels: { #}
      {#                     enabled: true, #}
      {#                     format: '<b>{point.name}</b>: {point.percentage:.1f} %', #}
      {#                     style: { #}
      {#                       color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black' #}
      {#                     } #}
      {#                   } #}
      {#                 } #}
      {#               }, #}
      {#               series: [{ #}
      {#                 name: 'Staffs', #}
      {#                 colorByPoint: true, #}
      {#                 data: data #}
      {#               }] #}
      {#             }); #}
      {#           </script> #}
      {#         </div> #}
      {#       </div> #}
      {#     </div> #}
      {#   </div> #}
      {#   <!-- /.modal-dialog --> #}
      {#   </div> #}

  </div>
{% endblock %}
